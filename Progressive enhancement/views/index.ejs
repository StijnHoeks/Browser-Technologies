<% include head.ejs %>

<header>
	<h1>Contacts</h1>
</header>
<article id="contacts">

	<% if (data) { %>
		<ul>
		<input type="text" class="hidden"id="filter" onkeyup="filter()" placeholder="Search for names..">
		<% for(var i = 0; i < data.length; i++) { %>
			<li id=<%= data[i].letter %>>
				<a href="#<%= data[i].letter %>">
					<h1 id="<%=data[i].letter%>" class="letter">
						<%= data[i].letter %>
					</h1>
				</a>
				<ul>
					<% for(var j = 0; j < data[i].data.length; j++) { %>
						<li>
							<a class="name" href="#<%=data[i].data[j].name.first%>_<%=data[i].data[j].name.last%>">
								<header>
									<img id="tumbnail" src='<%= data[i].data[j].picture.thumbnail %>' />
									<%= data[i].data[j].name.first %>
									<%= data[i].data[j].name.last %>
								</header>
								<p id="<%=data[i].data[j].name.first%>_<%=data[i].data[j].name.last%>" class="modal">
									<img id="imgThumbnail" src='<%= data[i].data[j].picture.thumbnail %>' />
									<img id="imgLarge" src='<%= data[i].data[j].picture.large %>' />
									<span><%= data[i].data[j].name.first %> <%= data[i].data[j].name.last %></span>
									<span><%= data[i].data[j].phone %></span>
									<span id="phone">&#9742;</span>
									<a href="#">X</a>
								</p>
							</a>
						</li>
					<% } %>
				</ul>
			</li>
		<% } %>
		</ul>
	<% } %>

	<h1 id="sticky"></h1>

</article>

<aside>
	<% if (data) { %>
		<ul>
		<% for(var i = 0; i < data.length; i++) { %>
			<li>
				<a href="#<%=data[i].letter%>">
					<%= data[i].letter %>
				</a>
			</li>
		<% } %>
		</ul>
	<% } %>
</aside>
<script>
function filter() {
  var input = document.getElementById("filter");
  var filter = input.value.toUpperCase();
  var table = document.getElementById("contacts");
  var tr = table.getElementsByTagName("li");

  // Loop through all table rows, and hide those who don't match the search query
	for (i = 0; i < tr.length; i++) {
		td = tr[i].getElementsByTagName("h1")[0];
		if (td) {
		    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
		        tr[i].style.display = "";
		    } 
		    else {
		        tr[i].style.display = "none";
		    }
		} 
	}
}
</script>
<script src="js/client.js"></script>


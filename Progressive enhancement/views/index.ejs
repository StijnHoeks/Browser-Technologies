<% include head.ejs %>

<header>
	<h1>Contacts</h1>
</header>
<article id="contacts">

	<% if (data) { %>
		<ul>
		<% for(var i = 0; i < data.length; i++) { %>
			<li id=<%= data[i].letter %>>
				<a href="#<%= data[i].letter %>">
					<h1 id="<%=data[i].letter%>">
						<%= data[i].letter %>
					</h1>
				</a>
				<ul>
					<% for(var j = 0; j < data[i].data.length; j++) { %>
						<li>
							<a id="<%=data[i].data[j].name.first%>_<%=data[i].data[j].name.last%>" href="#<%=data[i].data[j].name.first%>_<%=data[i].data[j].name.last%>">
								<header>
									<img src='<%= data[i].data[j].picture.thumbnail %>' />
									<%= data[i].data[j].name.first %>
									<%= data[i].data[j].name.last %>
								</header>
								<p class="phone"><%= data[i].data[j].phone %></p>
							</a>
						</li>
					<% } %>
				</ul>
			</li>
		<% } %>
		</ul>
	<% } %>

	<h1 id="sticky"></h1>

</article>

<aside>
	<% if (data) { %>
		<ul>
		<% for(var i = 0; i < data.length; i++) { %>
			<li>
				<a href="#<%=data[i].letter%>">
					<%= data[i].letter %>
				</a>
			</li>
		<% } %>
		</ul>
	<% } %>
</aside>

<script type="text/javascript">
	(function() {
		var letter = document.querySelectorAll('#contacts ul li h1');
		var sticky = document.getElementById('sticky');
		var navLetter = document.querySelectorAll('aside a');
		var navletterT =
		window.addEventListener('scroll', function() {
			var stickyTop = window.scrollY;
			for (var i = 0; i < letter.length; i++) {
				var letterScrlT = letter[i].offsetTop;
				if ( stickyTop > letterScrlT ) {
					sticky.innerHTML = letter[i].innerHTML;
					letter[i].classList.add('hide')
				}
				else {
					letter[i].classList.remove('hide')
				}
				if ( stickyTop < letter[0].offsetTop ) {
					sticky.innerHTML = '';
				}
			}
		});

		var 

	})();
</script>
